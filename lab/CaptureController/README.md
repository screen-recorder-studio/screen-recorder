# Captured Mouse Events Test Page

è¿™æ˜¯ä¸€ä¸ªç”¨äºæµ‹è¯• [Captured Mouse Events](https://screen-share.github.io/captured-mouse-events/) åè®®çš„æµ‹è¯•é¡µé¢ã€‚

## åŠŸèƒ½ç‰¹æ€§

### ğŸ¥ å±å¹•æ•è·
- æ”¯æŒæ•è·å±å¹•ã€çª—å£æˆ–æ ‡ç­¾é¡µ
- å¯é€‰æ‹©æ˜¯å¦åœ¨è§†é¢‘ä¸­åŒ…å«å…‰æ ‡
- å®æ—¶æ˜¾ç¤ºæ•è·çš„è§†é¢‘æµ

### ğŸ–±ï¸ é¼ æ ‡äº‹ä»¶æ•è·
- å®æ—¶è·Ÿè¸ªé¼ æ ‡åœ¨æ•è·è¡¨é¢ä¸Šçš„ä½ç½®
- æ˜¾ç¤ºé¼ æ ‡åæ ‡ (surfaceX, surfaceY)
- æ£€æµ‹é¼ æ ‡æ˜¯å¦åœ¨æ•è·åŒºåŸŸå†…
- è¯¦ç»†çš„äº‹ä»¶æ—¥å¿—è®°å½•

### ğŸ“Š ç»Ÿè®¡ä¿¡æ¯
- é¼ æ ‡äº‹ä»¶è®¡æ•°
- æ•è·æ—¶é•¿
- å¸§ç‡æ˜¾ç¤º

## ä½¿ç”¨æ–¹æ³•

### 1. æ‰“å¼€æµ‹è¯•é¡µé¢
åœ¨æ”¯æŒçš„æµè§ˆå™¨ä¸­æ‰“å¼€ `index.html` æ–‡ä»¶ã€‚

### 2. é…ç½®é€‰é¡¹
- **Include cursor in video**: æ§åˆ¶æ˜¯å¦åœ¨æ•è·çš„è§†é¢‘ä¸­æ˜¾ç¤ºå…‰æ ‡
- **Enable mouse event capture**: å¯ç”¨/ç¦ç”¨é¼ æ ‡äº‹ä»¶æ•è·åŠŸèƒ½

### 3. å¼€å§‹æµ‹è¯•
1. ç‚¹å‡» "Start Capture" æŒ‰é’®
2. é€‰æ‹©è¦æ•è·çš„å±å¹•/çª—å£/æ ‡ç­¾é¡µ
3. æˆæƒå±å¹•æ•è·æƒé™
4. å¼€å§‹ç§»åŠ¨é¼ æ ‡è§‚å¯Ÿäº‹ä»¶æ•è·

### 4. è§‚å¯Ÿç»“æœ
- åœ¨ "Current Mouse Position" åŒºåŸŸæŸ¥çœ‹å®æ—¶é¼ æ ‡åæ ‡
- åœ¨ "Event Log" ä¸­æŸ¥çœ‹è¯¦ç»†çš„äº‹ä»¶è®°å½•
- åœ¨ "Statistics" ä¸­æŸ¥çœ‹ç»Ÿè®¡ä¿¡æ¯

## æµè§ˆå™¨æ”¯æŒ

### å¿…éœ€æ”¯æŒ
- `navigator.mediaDevices.getDisplayMedia()` - å±å¹•æ•è· API

### å¯é€‰æ”¯æŒ
- `CaptureController` - é¼ æ ‡äº‹ä»¶æ•è· (å®éªŒæ€§åŠŸèƒ½)

### æµ‹è¯•è¿‡çš„æµè§ˆå™¨
- Chrome 116+ (å®éªŒæ€§æ”¯æŒ)
- Edge 116+ (å®éªŒæ€§æ”¯æŒ)
- Firefox (éƒ¨åˆ†æ”¯æŒï¼Œæ— é¼ æ ‡äº‹ä»¶)
- Safari (éƒ¨åˆ†æ”¯æŒï¼Œæ— é¼ æ ‡äº‹ä»¶)

## å¯ç”¨å®éªŒæ€§åŠŸèƒ½

ç”±äº Captured Mouse Events æ˜¯å®éªŒæ€§åŠŸèƒ½ï¼Œå¯èƒ½éœ€è¦å¯ç”¨ç‰¹å®šçš„æµè§ˆå™¨æ ‡å¿—ï¼š

### Chrome/Edge
1. è®¿é—® `chrome://flags/` æˆ– `edge://flags/`
2. æœç´¢ "Captured Mouse Events" æˆ–ç›¸å…³å®éªŒæ€§åŠŸèƒ½
3. å¯ç”¨è¯¥åŠŸèƒ½
4. é‡å¯æµè§ˆå™¨

## æµ‹è¯•åœºæ™¯

### åŸºç¡€æµ‹è¯•
1. æ•è·æ•´ä¸ªå±å¹•ï¼Œç§»åŠ¨é¼ æ ‡è§‚å¯Ÿåæ ‡å˜åŒ–
2. æ•è·ç‰¹å®šçª—å£ï¼Œæµ‹è¯•é¼ æ ‡è¿›å‡ºçª—å£çš„æ£€æµ‹
3. æµ‹è¯•ä¸åŒçš„å…‰æ ‡è®¾ç½® (always/never)

### é«˜çº§æµ‹è¯•
1. å¤šæ˜¾ç¤ºå™¨ç¯å¢ƒä¸‹çš„åæ ‡æ˜ å°„
2. é«˜ DPI æ˜¾ç¤ºå™¨çš„åæ ‡ç²¾åº¦
3. å¿«é€Ÿé¼ æ ‡ç§»åŠ¨çš„äº‹ä»¶é¢‘ç‡
4. é•¿æ—¶é—´æ•è·çš„æ€§èƒ½è¡¨ç°

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

**Q: é¡µé¢æ˜¾ç¤º "CaptureController is not supported"**
A: æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒ Captured Mouse Events åŠŸèƒ½ï¼Œä½†ä»å¯ä»¥æµ‹è¯•åŸºç¡€çš„å±å¹•æ•è·åŠŸèƒ½ã€‚

**Q: é¼ æ ‡åæ ‡å§‹ç»ˆæ˜¾ç¤º "X: -, Y: -"**
A: å¯èƒ½çš„åŸå› ï¼š
- æµè§ˆå™¨ä¸æ”¯æŒè¯¥åŠŸèƒ½
- éœ€è¦å¯ç”¨å®éªŒæ€§æ ‡å¿—
- é¼ æ ‡ä¸åœ¨æ•è·åŒºåŸŸå†…

**Q: å±å¹•æ•è·å¤±è´¥**
A: æ£€æŸ¥ï¼š
- æµè§ˆå™¨æ˜¯å¦æ”¯æŒ `getDisplayMedia()`
- æ˜¯å¦æˆæƒäº†å±å¹•æ•è·æƒé™
- æ˜¯å¦åœ¨ HTTPS ç¯å¢ƒä¸‹è¿è¡Œ

### è°ƒè¯•ä¿¡æ¯
- æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·æŸ¥çœ‹æ§åˆ¶å°é”™è¯¯
- æŸ¥çœ‹äº‹ä»¶æ—¥å¿—äº†è§£è¯¦ç»†çš„æ‰§è¡Œè¿‡ç¨‹
- æ£€æŸ¥æµè§ˆå™¨æ”¯æŒçŠ¶æ€æ˜¾ç¤º

## æŠ€æœ¯å®ç°

### æ ¸å¿ƒ API
```javascript
// åˆ›å»º CaptureController
const controller = new CaptureController();

// è®¾ç½®é¼ æ ‡äº‹ä»¶å¤„ç†å™¨
controller.oncapturedmousechange = (event) => {
    console.log(`Mouse: (${event.surfaceX}, ${event.surfaceY})`);
};

// å¼€å§‹å±å¹•æ•è·
const stream = await navigator.mediaDevices.getDisplayMedia({
    video: { cursor: "never" },
    controller: controller
});
```

### äº‹ä»¶å¤„ç†
- `surfaceX`, `surfaceY`: é¼ æ ‡åœ¨æ•è·è¡¨é¢ä¸Šçš„åæ ‡
- åæ ‡ä¸º -1, -1 æ—¶è¡¨ç¤ºé¼ æ ‡ä¸åœ¨æ•è·åŒºåŸŸå†…
- äº‹ä»¶ä¼šè‡ªåŠ¨å»é‡ï¼Œç›¸åŒåæ ‡ä¸ä¼šé‡å¤è§¦å‘

## å‚è€ƒèµ„æ–™

- [Captured Mouse Events è§„èŒƒ](https://screen-share.github.io/captured-mouse-events/)
- [Screen Capture API](https://developer.mozilla.org/en-US/docs/Web/API/Screen_Capture_API)
- [MediaDevices.getDisplayMedia()](https://developer.mozilla.org/en-US/docs/Web/API/MediaDevices/getDisplayMedia)
