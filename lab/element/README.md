# Element Selection & Recording Test

è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•é¡µé¢ï¼Œæ¼”ç¤ºå¦‚ä½•é€šè¿‡é¼ æ ‡æ¡†é€‰é¡µé¢å…ƒç´ å¹¶å½•åˆ¶å®ƒä»¬ã€‚è¯¥é¡µé¢ç»“åˆäº†ç°ä»£Web APIæ¥å®ç°ç²¾ç¡®çš„å…ƒç´ æ•è·åŠŸèƒ½ã€‚

## åŠŸèƒ½ç‰¹æ€§

### ğŸ¯ å…ƒç´ é€‰æ‹©
- **å¯è§†åŒ–é€‰æ‹©æ¨¡å¼**: å¯ç”¨é€‰æ‹©æ¨¡å¼åï¼Œé¼ æ ‡æ‚¬åœæ—¶é«˜äº®æ˜¾ç¤ºå¯é€‰æ‹©çš„å…ƒç´ 
- **æ™ºèƒ½è¿‡æ»¤**: è‡ªåŠ¨æ’é™¤æ§åˆ¶æŒ‰é’®å’Œç•Œé¢å…ƒç´ ï¼Œåªå…è®¸é€‰æ‹©å†…å®¹åŒºåŸŸ
- **å®æ—¶åé¦ˆ**: æ˜¾ç¤ºå½“å‰é€‰ä¸­å…ƒç´ çš„è¯¦ç»†ä¿¡æ¯

### ğŸ“¹ å½•åˆ¶åŠŸèƒ½
- **å¤šAPIæ”¯æŒ**: è‡ªåŠ¨æ£€æµ‹å¹¶ä½¿ç”¨æœ€ä½³çš„å½•åˆ¶API
  - Element Capture API (RestrictionTarget)
  - Region Capture API (CropTarget)
  - æ ‡å‡†Screen Capture API (é™çº§æ–¹æ¡ˆ)
- **å®æ—¶é¢„è§ˆ**: å½•åˆ¶è¿‡ç¨‹ä¸­å®æ—¶æ˜¾ç¤ºæ•è·çš„å†…å®¹
- **è‡ªåŠ¨ä¿å­˜**: å½•åˆ¶ç»“æŸåè‡ªåŠ¨ä¸‹è½½è§†é¢‘æ–‡ä»¶

### ğŸ¨ æ¼”ç¤ºå†…å®¹
- **åŠ¨ç”»å…ƒç´ **: åŒ…å«CSSåŠ¨ç”»å’ŒJavaScriptåŠ¨ç”»çš„æµ‹è¯•åŒºåŸŸ
- **äº¤äº’å…ƒç´ **: æŒ‰é’®ã€è¾“å…¥æ¡†ç­‰å¯äº¤äº’ç»„ä»¶
- **å¤šæ ·åŒ–å¸ƒå±€**: ä¸åŒæ ·å¼å’Œç»“æ„çš„å†…å®¹åŒºåŸŸ

## ä½¿ç”¨æ–¹æ³•

### 1. å¯ç”¨é€‰æ‹©æ¨¡å¼
ç‚¹å‡» "Enable Selection Mode" æŒ‰é’®å¼€å§‹é€‰æ‹©å…ƒç´ ã€‚

### 2. é€‰æ‹©ç›®æ ‡å…ƒç´ 
- é¼ æ ‡æ‚¬åœåœ¨é¡µé¢å…ƒç´ ä¸Šï¼Œå¯é€‰æ‹©çš„å…ƒç´ ä¼šè¢«è“è‰²è¾¹æ¡†é«˜äº®
- ç‚¹å‡»æƒ³è¦å½•åˆ¶çš„å…ƒç´ ï¼Œè¢«é€‰ä¸­çš„å…ƒç´ ä¼šæ˜¾ç¤ºç»¿è‰²è¾¹æ¡†
- çŠ¶æ€æ ä¼šæ˜¾ç¤ºé€‰ä¸­å…ƒç´ çš„ä¿¡æ¯

### 3. å¼€å§‹å½•åˆ¶
- ç‚¹å‡» "Start Recording" æŒ‰é’®
- æµè§ˆå™¨ä¼šè¯·æ±‚å±å¹•æ•è·æƒé™ï¼Œé€‰æ‹©å½“å‰æ ‡ç­¾é¡µ
- å½•åˆ¶å¼€å§‹åï¼Œå·¦ä¾§è§†é¢‘åŒºåŸŸä¼šæ˜¾ç¤ºå®æ—¶é¢„è§ˆ

### 4. åœæ­¢å½•åˆ¶
- ç‚¹å‡» "Stop Recording" æŒ‰é’®ç»“æŸå½•åˆ¶
- è§†é¢‘æ–‡ä»¶ä¼šè‡ªåŠ¨ä¸‹è½½åˆ°æœ¬åœ°

## æŠ€æœ¯å®ç°

### APIæ”¯æŒæ£€æµ‹
é¡µé¢ä¼šè‡ªåŠ¨æ£€æµ‹æµè§ˆå™¨å¯¹ä»¥ä¸‹APIçš„æ”¯æŒæƒ…å†µï¼š
- âœ… Screen Capture API
- âœ…/âŒ Element Capture API (RestrictionTarget)
- âœ…/âŒ Region Capture API (CropTarget)

### å…ƒç´ é€‰æ‹©ç®—æ³•
```javascript
// æ™ºèƒ½è¿‡æ»¤å¯é€‰æ‹©å…ƒç´ 
isSelectableElement(element) {
    const excludeSelectors = [
        '.controls', '.controls *',
        '.selection-overlay',
        'button:not(.demo-button)',
        '.status', '.status *',
        '.info-panel', '.info-panel *'
    ];
    
    return !excludeSelectors.some(selector => element.matches(selector));
}
```

### å½•åˆ¶å®ç°
```javascript
// å°è¯•ä½¿ç”¨Element Capture API
if (typeof RestrictionTarget !== 'undefined') {
    const restrictionTarget = await RestrictionTarget.fromElement(this.selectedElement);
    await track.restrictTo(restrictionTarget);
}
// é™çº§åˆ°Region Capture API
else if (typeof CropTarget !== 'undefined') {
    const cropTarget = await CropTarget.fromElement(this.selectedElement);
    await track.cropTo(cropTarget);
}
```

## æµè§ˆå™¨å…¼å®¹æ€§

### æ¨èæµè§ˆå™¨
- **Chrome 98+**: å®Œæ•´æ”¯æŒæ‰€æœ‰åŠŸèƒ½
- **Edge 98+**: å®Œæ•´æ”¯æŒæ‰€æœ‰åŠŸèƒ½

### APIæ”¯æŒçŠ¶æ€
- **Screen Capture API**: æ‰€æœ‰ç°ä»£æµè§ˆå™¨æ”¯æŒ
- **Element/Region Capture API**: éœ€è¦å¯ç”¨å®éªŒæ€§åŠŸèƒ½
  - Chrome: `chrome://flags/` å¯ç”¨ "Experimental Web Platform features"
  - æˆ–ä½¿ç”¨Origin Trial token

### å¯ç”¨å®éªŒæ€§åŠŸèƒ½
1. æ‰“å¼€ `chrome://flags/`
2. æœç´¢ "Experimental Web Platform features"
3. è®¾ç½®ä¸º "Enabled"
4. é‡å¯æµè§ˆå™¨

## æ–‡ä»¶ç»“æ„

```
lab/element/
â”œâ”€â”€ index.html          # ä¸»é¡µé¢
â”œâ”€â”€ style.css           # æ ·å¼æ–‡ä»¶
â”œâ”€â”€ script.js           # æ ¸å¿ƒJavaScripté€»è¾‘
â””â”€â”€ README.md           # è¯´æ˜æ–‡æ¡£
```

## æ ·å¼ç‰¹æ€§

### å“åº”å¼è®¾è®¡
- æ¡Œé¢ç«¯ï¼šå·¦å³åˆ†æ å¸ƒå±€
- ç§»åŠ¨ç«¯ï¼šä¸Šä¸‹å †å å¸ƒå±€

### è§†è§‰åé¦ˆ
- **æ‚¬åœé«˜äº®**: è“è‰²è¾¹æ¡† + åŠé€æ˜èƒŒæ™¯
- **é€‰ä¸­çŠ¶æ€**: ç»¿è‰²è¾¹æ¡† + åŠé€æ˜èƒŒæ™¯
- **åŠ¨ç”»æ•ˆæœ**: å¹³æ»‘è¿‡æ¸¡å’Œè„‰å†²åŠ¨ç”»

### å…ƒç´ ä¼˜åŒ–
```css
.demo-section {
    /* Element capture optimization */
    isolation: isolate;
    transform-style: flat;
    background-color: white; /* é˜²æ­¢é€æ˜æ•è· */
}
```

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **APIä¸æ”¯æŒ**
   - ç¡®ä¿ä½¿ç”¨Chrome 98+æµè§ˆå™¨
   - å¯ç”¨å®éªŒæ€§Webå¹³å°åŠŸèƒ½

2. **å½•åˆ¶å¤±è´¥**
   - æ£€æŸ¥æµè§ˆå™¨æƒé™è®¾ç½®
   - ç¡®ä¿é€‰æ‹©äº†æ­£ç¡®çš„å±å¹•/æ ‡ç­¾é¡µ

3. **å…ƒç´ æ— æ³•é€‰æ‹©**
   - ç¡®ä¿å·²å¯ç”¨é€‰æ‹©æ¨¡å¼
   - æŸäº›ç³»ç»Ÿå…ƒç´ è¢«æ•…æ„æ’é™¤

### è°ƒè¯•ä¿¡æ¯
æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·æŸ¥çœ‹æ§åˆ¶å°è¾“å‡ºï¼Œè·å–è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯å’ŒAPIæ”¯æŒçŠ¶æ€ã€‚

## æ‰©å±•åŠŸèƒ½

è¿™ä¸ªæµ‹è¯•é¡µé¢å¯ä»¥ä½œä¸ºåŸºç¡€ï¼Œæ‰©å±•ä»¥ä¸‹åŠŸèƒ½ï¼š
- å¤šå…ƒç´ åŒæ—¶å½•åˆ¶
- å½•åˆ¶å‚æ•°è‡ªå®šä¹‰
- å®æ—¶æ ‡æ³¨å’Œç¼–è¾‘
- äº‘ç«¯å­˜å‚¨é›†æˆ
- åä½œå½•åˆ¶åŠŸèƒ½
