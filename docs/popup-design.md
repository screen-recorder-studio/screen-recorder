# 屏幕录制扩展 Popup 页面设计文档

## 📋 概述

这是一个为 Chrome 屏幕录制扩展设计的现代化 popup 页面，使用 Svelte 5、Tailwind CSS 和 Lucide 图标构建。

## 🎯 设计特性

### 1. 六种录制模式
- **区域录制** - 选择屏幕特定区域进行录制
- **元素录制** - 选择网页特定元素进行录制  
- **摄像头录制** - 录制摄像头画面
- **Tab 录制** - 录制当前浏览器标签页
- **Window 录制** - 录制整个浏览器窗口
- **Screen 录制** - 录制整个屏幕

### 2. 智能控制系统
- **开始录制** - 蓝色渐变按钮，清晰的开始指示
- **暂停录制** - 橙色按钮，支持暂停和恢复
- **停止录制** - 红色按钮，安全结束录制
- **状态指示** - 实时显示录制状态和选中模式

### 3. 用户体验优化
- **模式锁定** - 录制时禁用其他模式选择
- **视觉反馈** - 选中状态、悬停效果、加载动画
- **状态提示** - 智能提示当前操作和状态
- **无障碍访问** - 完整的键盘导航和屏幕阅读器支持

## 🎨 设计系统

### 布局结构
```
┌─────────────────────────────┐
│ 头部 (标题 + 描述)            │
├─────────────────────────────┤
│ 录制模式选择 (3x2 网格)       │
│ ┌─────┐ ┌─────┐ ┌─────┐     │
│ │区域 │ │元素 │ │摄像头│     │
│ └─────┘ └─────┘ └─────┘     │
│ ┌─────┐ ┌─────┐ ┌─────┐     │
│ │ Tab │ │Window│ │Screen│    │
│ └─────┘ └─────┘ └─────┘     │
├─────────────────────────────┤
│ 录制状态显示 (仅录制时显示)   │
├─────────────────────────────┤
│ 控制按钮区域                 │
│ ┌─────────────────────────┐ │
│ │ 开始录制/暂停录制        │ │
│ └─────────────────────────┘ │
│ ┌─────────────────────────┐ │
│ │ 停止录制 (仅录制时显示)   │ │
│ └─────────────────────────┘ │
│ ┌─────────────────────────┐ │
│ │ 提示信息                │ │
│ └─────────────────────────┘ │
└─────────────────────────────┘
```

### 颜色方案
- **主色调**: 蓝色 (#3B82F6) - 用于选中状态和主要按钮
- **录制状态**: 红色 (#EF4444) - 用于录制指示和停止按钮
- **暂停状态**: 橙色 (#F97316) - 用于暂停按钮
- **恢复状态**: 绿色 (#10B981) - 用于恢复按钮
- **背景色**: 灰色系 - 用于容器和边框

### 图标系统
使用 Lucide 图标库，确保视觉一致性：
- `MousePointer` - 区域录制
- `Monitor` - 元素录制
- `Camera` - 摄像头录制
- `Tab` - 标签页录制
- `Window` - 窗口录制
- `ScreenShare` - 屏幕录制
- `Play` - 开始/恢复
- `Pause` - 暂停
- `Square` - 停止
- `Loader2` - 加载状态

## 🔧 技术实现

### Svelte 5 特性
```typescript
// 使用 Svelte 5 runes 进行状态管理
let isRecording = $state(false)
let isPaused = $state(false)
let selectedMode = $state<'area' | 'element' | 'camera' | 'tab' | 'window' | 'screen'>('screen')
let isLoading = $state(false)

// 响应式计算
function getButtonText() {
  if (isLoading) return '准备中...'
  if (isRecording) {
    return isPaused ? '恢复录制' : '暂停录制'
  }
  return '开始录制'
}
```

### Tailwind CSS 类
- **布局**: `grid grid-cols-3 gap-2`, `flex items-center justify-center`
- **状态**: `class:border-blue-500={selectedMode === mode.id}`
- **动画**: `transition-all duration-200`, `animate-pulse`, `animate-spin`
- **响应式**: 自适应不同屏幕尺寸

### 组件结构
- **模块化设计** - 清晰的功能分离
- **类型安全** - 完整的 TypeScript 类型定义
- **可扩展性** - 易于添加新的录制模式
- **可维护性** - 清晰的代码结构和注释

## 🚀 使用方法

### 开发环境预览
访问 `/popup-demo` 路由查看 popup 页面的完整效果。

### 扩展集成
1. 在 `manifest.json` 中配置 popup 页面
2. 实现录制逻辑的具体功能
3. 添加与 background script 的通信
4. 处理权限请求和错误状态

### 自定义配置
- 修改 `recordingModes` 数组添加新模式
- 调整颜色方案和样式
- 扩展状态管理逻辑
- 添加新的交互功能

## 📱 响应式设计

- **固定宽度**: 320px，适合扩展 popup
- **自适应高度**: 根据内容动态调整
- **触摸友好**: 适当的点击区域大小
- **键盘导航**: 完整的键盘访问支持

## ♿ 无障碍访问

- **语义化 HTML** - 正确的标签和结构
- **ARIA 属性** - 屏幕阅读器支持
- **键盘导航** - Tab 键导航支持
- **焦点管理** - 清晰的焦点指示
- **颜色对比** - 符合 WCAG 标准

## 🎯 下一步计划

1. **功能集成** - 连接实际的录制 API
2. **状态持久化** - 保存用户偏好设置
3. **错误处理** - 完善的错误提示和恢复
4. **性能优化** - 减少重渲染和内存使用
5. **测试覆盖** - 添加单元测试和集成测试

## 📄 文件结构

```
src/routes/popup/
├── +page.svelte          # 主 popup 页面
└── README.md            # 使用说明

src/routes/popup-demo/
└── +page.svelte          # 开发预览页面

docs/
└── popup-design.md      # 设计文档 (本文件)
```
