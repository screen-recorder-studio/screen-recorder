# P0 & P1 ä¼˜åŒ–æµ‹è¯•æ£€æŸ¥æ¸…å•

## ğŸ“‹ æµ‹è¯•æ¦‚è¿°

**ä¼˜åŒ–é¡¹ç›®**ï¼šP0 æ‰¹é‡è¯»å– + P1 å¸§ç¼“å†²é™åˆ¶  
**æµ‹è¯•ç›®æ ‡**ï¼šéªŒè¯æ€§èƒ½æå‡å’ŒåŠŸèƒ½æ­£ç¡®æ€§  
**æµ‹è¯•ç¯å¢ƒ**ï¼šChrome æµè§ˆå™¨ + å¼€å‘è€…å·¥å…·

---

## âœ… æµ‹è¯•å‰å‡†å¤‡

### 1. å‡†å¤‡æµ‹è¯•æ•°æ®

- [ ] çŸ­è§†é¢‘ï¼ˆ1åˆ†é’Ÿï¼‰
- [ ] ä¸­ç­‰è§†é¢‘ï¼ˆ5åˆ†é’Ÿï¼‰
- [ ] é•¿è§†é¢‘ï¼ˆ10åˆ†é’Ÿï¼‰
- [ ] è¶…é•¿è§†é¢‘ï¼ˆ30åˆ†é’Ÿ+ï¼Œå¯é€‰ï¼‰

### 2. æ‰“å¼€å¼€å‘è€…å·¥å…·

```
Chrome DevTools:
- Console (æŸ¥çœ‹æ—¥å¿—)
- Performance (æ€§èƒ½åˆ†æ)
- Memory (å†…å­˜åˆ†æ)
- Network (ç½‘ç»œç›‘æ§)
```

### 3. æ¸…é™¤ç¼“å­˜

```
1. æ‰“å¼€ DevTools
2. Application > Storage > Clear site data
3. åˆ·æ–°é¡µé¢
```

---

## ğŸ§ª P0 ä¼˜åŒ–æµ‹è¯•ï¼šæ‰¹é‡è¯»å–

### æµ‹è¯• 1: çª—å£åˆ‡æ¢æ€§èƒ½

**ç›®æ ‡**ï¼šéªŒè¯ I/O æ¬¡æ•°å‡å°‘ï¼Œå»¶è¿Ÿé™ä½

#### æ­¥éª¤

1. [ ] æ‰“å¼€å½•åˆ¶æ–‡ä»¶ï¼ˆ5åˆ†é’Ÿè§†é¢‘ï¼‰
2. [ ] æ‰“å¼€ Consoleï¼Œè§‚å¯Ÿåˆå§‹åŠ è½½æ—¥å¿—
3. [ ] æ‹–åŠ¨è¿›åº¦æ¡åˆ°ä¸­é—´ä½ç½®
4. [ ] è§‚å¯Ÿæ—¥å¿—ä¸­çš„æ‰¹é‡è¯»å–ä¿¡æ¯

#### é¢„æœŸæ—¥å¿—

```
[OPFS-READER] Batch read optimization:
  count: 90
  totalBytes: ~5-10MB
  oldMethod: "90 I/O operations"
  newMethod: "1 I/O operation"

âœ… [OPFS-READER] Batch read completed in 45.2ms
```

#### éªŒè¯ç‚¹

- [ ] çœ‹åˆ° "Batch read optimization" æ—¥å¿—
- [ ] è¯»å–æ—¶é—´ < 200ms
- [ ] åªæœ‰ 1 æ¬¡ I/O æ“ä½œ
- [ ] çª—å£åˆ‡æ¢æµç•…

---

### æµ‹è¯• 2: æ€§èƒ½å¯¹æ¯”

**ç›®æ ‡**ï¼šé‡åŒ–æ€§èƒ½æå‡

#### æ­¥éª¤

1. [ ] æ‰“å¼€ Performance é¢æ¿
2. [ ] ç‚¹å‡» Record
3. [ ] æ‹–åŠ¨è¿›åº¦æ¡ 5 æ¬¡ï¼ˆä¸åŒä½ç½®ï¼‰
4. [ ] åœæ­¢ Record
5. [ ] åˆ†æ Timeline

#### é¢„æœŸç»“æœ

- [ ] æ¯æ¬¡çª—å£åˆ‡æ¢ < 200ms
- [ ] æ— æ˜æ˜¾å¡é¡¿
- [ ] Main thread æ´»åŠ¨æ—¶é—´çŸ­

#### æ€§èƒ½æŒ‡æ ‡

| æ“ä½œ | ç›®æ ‡æ—¶é—´ | å®é™…æ—¶é—´ | é€šè¿‡ |
|------|---------|---------|------|
| çª—å£åˆ‡æ¢ 1 | < 200ms | ___ms | â˜ |
| çª—å£åˆ‡æ¢ 2 | < 200ms | ___ms | â˜ |
| çª—å£åˆ‡æ¢ 3 | < 200ms | ___ms | â˜ |
| çª—å£åˆ‡æ¢ 4 | < 200ms | ___ms | â˜ |
| çª—å£åˆ‡æ¢ 5 | < 200ms | ___ms | â˜ |

---

### æµ‹è¯• 3: æ•°æ®å®Œæ•´æ€§

**ç›®æ ‡**ï¼šéªŒè¯æ‰¹é‡è¯»å–ä¸ä¸¢å¤±æ•°æ®

#### æ­¥éª¤

1. [ ] æ‰“å¼€å½•åˆ¶æ–‡ä»¶
2. [ ] æ’­æ”¾è§†é¢‘
3. [ ] æ‹–åŠ¨è¿›åº¦æ¡åˆ°å¤šä¸ªä½ç½®
4. [ ] æ£€æŸ¥è§†é¢‘ç”»é¢æ˜¯å¦æ­£å¸¸

#### éªŒè¯ç‚¹

- [ ] è§†é¢‘ç”»é¢æ¸…æ™°
- [ ] æ— èŠ±å±æˆ–é»‘å±
- [ ] éŸ³è§†é¢‘åŒæ­¥ï¼ˆå¦‚æœ‰éŸ³é¢‘ï¼‰
- [ ] æ— è§£ç é”™è¯¯

---

## ğŸ§ª P1 ä¼˜åŒ–æµ‹è¯•ï¼šå¸§ç¼“å†²é™åˆ¶

### æµ‹è¯• 4: ç¼“å†²åŒºçŠ¶æ€ç›‘æ§

**ç›®æ ‡**ï¼šéªŒè¯ç¼“å†²åŒºé™åˆ¶ç”Ÿæ•ˆ

#### æ­¥éª¤

1. [ ] æ‰“å¼€å½•åˆ¶æ–‡ä»¶
2. [ ] è§‚å¯Ÿ Console ä¸­çš„ç¼“å†²åŒºçŠ¶æ€æ—¥å¿—
3. [ ] æ’­æ”¾è§†é¢‘

#### é¢„æœŸæ—¥å¿—

```
ğŸ“Š [COMPOSITE-WORKER] Buffer status:
  decodedFrames: 90
  nextDecoded: 0
  limits: { maxDecodedFrames: 150, maxNextDecoded: 120 }
  droppedFrames: 0
  estimatedMemory: "720MB (@ 1080p)"
```

#### éªŒè¯ç‚¹

- [ ] çœ‹åˆ°ç¼“å†²åŒºçŠ¶æ€æ—¥å¿—
- [ ] decodedFrames â‰¤ 150
- [ ] nextDecoded â‰¤ 120
- [ ] å†…å­˜ä¼°ç®—åˆç†

---

### æµ‹è¯• 5: å†…å­˜ç¨³å®šæ€§

**ç›®æ ‡**ï¼šéªŒè¯é•¿æ—¶é—´æ’­æ”¾å†…å­˜ä¸å¢é•¿

#### æ­¥éª¤

1. [ ] æ‰“å¼€ Memory é¢æ¿
2. [ ] Take heap snapshot (åˆå§‹)
3. [ ] æ’­æ”¾è§†é¢‘ 5 åˆ†é’Ÿ
4. [ ] Take heap snapshot (5åˆ†é’Ÿå)
5. [ ] å¯¹æ¯”å†…å­˜å ç”¨

#### é¢„æœŸç»“æœ

- [ ] åˆå§‹å†…å­˜ < 1GB
- [ ] 5åˆ†é’Ÿåå†…å­˜ < 1.2GB
- [ ] å†…å­˜å¢é•¿ < 20%

#### å†…å­˜æŒ‡æ ‡

| æ—¶é—´ç‚¹ | ç›®æ ‡å†…å­˜ | å®é™…å†…å­˜ | é€šè¿‡ |
|--------|---------|---------|------|
| åˆå§‹ | < 1GB | ___MB | â˜ |
| 1åˆ†é’Ÿ | < 1GB | ___MB | â˜ |
| 3åˆ†é’Ÿ | < 1.1GB | ___MB | â˜ |
| 5åˆ†é’Ÿ | < 1.2GB | ___MB | â˜ |

---

### æµ‹è¯• 6: ä¸¢å¸§æœºåˆ¶

**ç›®æ ‡**ï¼šéªŒè¯ç¼“å†²åŒºæ»¡æ—¶æ­£ç¡®ä¸¢å¸§

#### æ­¥éª¤

1. [ ] æ‰“å¼€å½•åˆ¶æ–‡ä»¶ï¼ˆé«˜åˆ†è¾¨ç‡ï¼Œå¦‚ 4Kï¼‰
2. [ ] å¿«é€Ÿæ‹–åŠ¨è¿›åº¦æ¡å¤šæ¬¡
3. [ ] è§‚å¯Ÿ Console è­¦å‘Šæ—¥å¿—

#### é¢„æœŸæ—¥å¿—ï¼ˆå¦‚æœè§¦å‘ï¼‰

```
âš ï¸ [COMPOSITE-WORKER] Buffer approaching limit (decodedFrames: 135/150)
âš ï¸ [COMPOSITE-WORKER] Buffer full (decodedFrames: 150/150), dropping oldest frame
âš ï¸ [COMPOSITE-WORKER] Total frames dropped: 10
```

#### éªŒè¯ç‚¹

- [ ] ç¼“å†²åŒºä¸è¶…è¿‡é™åˆ¶
- [ ] ä¸¢å¸§æ—¶æœ‰è­¦å‘Šæ—¥å¿—
- [ ] æ’­æ”¾ä»ç„¶æµç•…
- [ ] æ— å´©æºƒæˆ–é”™è¯¯

---

## ğŸ§ª ç»¼åˆåŠŸèƒ½æµ‹è¯•

### æµ‹è¯• 7: å®Œæ•´æ’­æ”¾æµç¨‹

**ç›®æ ‡**ï¼šéªŒè¯æ‰€æœ‰åŠŸèƒ½æ­£å¸¸å·¥ä½œ

#### æ­¥éª¤

1. [ ] æ‰“å¼€å½•åˆ¶æ–‡ä»¶
2. [ ] ç‚¹å‡»æ’­æ”¾
3. [ ] æ’­æ”¾ 30 ç§’
4. [ ] æš‚åœ
5. [ ] æ‹–åŠ¨è¿›åº¦æ¡åˆ° 50%
6. [ ] ç»§ç»­æ’­æ”¾
7. [ ] æ‹–åŠ¨è¿›åº¦æ¡åˆ° 90%
8. [ ] æ’­æ”¾åˆ°ç»“å°¾

#### éªŒè¯ç‚¹

- [ ] æ’­æ”¾æµç•…ï¼ˆ30fpsï¼‰
- [ ] æš‚åœ/ç»§ç»­æ­£å¸¸
- [ ] è¿›åº¦æ¡æ‹–åŠ¨å“åº”å¿«
- [ ] å¯ä»¥æ’­æ”¾åˆ° 100%
- [ ] æ— é”™è¯¯æ—¥å¿—

---

### æµ‹è¯• 8: è¿ç»­æ’­æ”¾

**ç›®æ ‡**ï¼šéªŒè¯çª—å£è‡ªåŠ¨åˆ‡æ¢

#### æ­¥éª¤

1. [ ] æ‰“å¼€å½•åˆ¶æ–‡ä»¶ï¼ˆ10åˆ†é’Ÿï¼‰
2. [ ] ä»å¤´æ’­æ”¾
3. [ ] è§‚å¯Ÿçª—å£åˆ‡æ¢æ—¥å¿—
4. [ ] æ’­æ”¾åˆ°ç»“å°¾

#### é¢„æœŸæ—¥å¿—

```
[progress] VideoComposite - reached window boundary, requesting next window
[OPFS-READER] Batch read optimization: ...
âœ… [OPFS-READER] Batch read completed in 45.2ms
[progress] Worker ready, continuing playback in new window
```

#### éªŒè¯ç‚¹

- [ ] çª—å£è‡ªåŠ¨åˆ‡æ¢
- [ ] åˆ‡æ¢æ—¶æ— å¡é¡¿
- [ ] æ’­æ”¾è¿ç»­
- [ ] å¯ä»¥æ’­æ”¾åˆ° 100%

---

### æµ‹è¯• 9: è¾¹ç•Œæƒ…å†µ

**ç›®æ ‡**ï¼šéªŒè¯æç«¯æƒ…å†µå¤„ç†

#### æµ‹è¯• 9.1: è¶…é•¿å½•åˆ¶

- [ ] æ‰“å¼€ 30 åˆ†é’Ÿ+ å½•åˆ¶
- [ ] æ‹–åŠ¨åˆ°æœ«å°¾
- [ ] éªŒè¯æ‰¹é‡è¯»å–æ€§èƒ½
- [ ] éªŒè¯å†…å­˜ç¨³å®š

#### æµ‹è¯• 9.2: å¿«é€Ÿåˆ‡æ¢

- [ ] å¿«é€Ÿæ‹–åŠ¨è¿›åº¦æ¡ 10 æ¬¡
- [ ] éªŒè¯æ— å´©æºƒ
- [ ] éªŒè¯ç¼“å†²åŒºç®¡ç†

#### æµ‹è¯• 9.3: é«˜åˆ†è¾¨ç‡

- [ ] æ‰“å¼€ 4K å½•åˆ¶ï¼ˆå¦‚æœ‰ï¼‰
- [ ] éªŒè¯å†…å­˜é™åˆ¶
- [ ] éªŒè¯ä¸¢å¸§æœºåˆ¶

---

## ğŸ“Š æ€§èƒ½åŸºå‡†æµ‹è¯•

### åŸºå‡† 1: çª—å£åˆ‡æ¢å»¶è¿Ÿ

**æµ‹è¯•æ–¹æ³•**ï¼š
```javascript
// åœ¨ Console æ‰§è¡Œ
const testWindowSwitch = async () => {
  const times = []
  for (let i = 0; i < 10; i++) {
    const start = performance.now()
    // æ‹–åŠ¨è¿›åº¦æ¡
    await new Promise(resolve => setTimeout(resolve, 2000))
    const end = performance.now()
    times.push(end - start)
  }
  console.log('Average:', times.reduce((a,b) => a+b) / times.length)
  console.log('Min:', Math.min(...times))
  console.log('Max:', Math.max(...times))
}
```

**ç›®æ ‡**ï¼š
- [ ] å¹³å‡ < 200ms
- [ ] æœ€å¤§ < 300ms

---

### åŸºå‡† 2: å†…å­˜å ç”¨

**æµ‹è¯•æ–¹æ³•**ï¼š
1. æ‰“å¼€ Memory é¢æ¿
2. æ’­æ”¾ 10 åˆ†é’Ÿ
3. æ¯åˆ†é’Ÿè®°å½•å†…å­˜

**ç›®æ ‡**ï¼š
- [ ] å³°å€¼ < 1.2GB
- [ ] ç¨³å®šåœ¨ 1GB å·¦å³

---

## âœ… æµ‹è¯•é€šè¿‡æ ‡å‡†

### P0 ä¼˜åŒ–é€šè¿‡æ ‡å‡†

- [ ] çª—å£åˆ‡æ¢å»¶è¿Ÿ < 200msï¼ˆå¹³å‡ï¼‰
- [ ] æ‰¹é‡è¯»å–æ—¥å¿—æ­£å¸¸
- [ ] æ— æ•°æ®ä¸¢å¤±æˆ–æŸå
- [ ] æ’­æ”¾æµç•…

### P1 ä¼˜åŒ–é€šè¿‡æ ‡å‡†

- [ ] å³°å€¼å†…å­˜ < 1.2GB
- [ ] ç¼“å†²åŒºé™åˆ¶ç”Ÿæ•ˆ
- [ ] é•¿æ—¶é—´æ’­æ”¾å†…å­˜ç¨³å®š
- [ ] ä¸¢å¸§ç‡ < 1%ï¼ˆæ­£å¸¸åœºæ™¯ï¼‰

### ç»¼åˆé€šè¿‡æ ‡å‡†

- [ ] æ‰€æœ‰åŠŸèƒ½æµ‹è¯•é€šè¿‡
- [ ] æ— å´©æºƒæˆ–ä¸¥é‡é”™è¯¯
- [ ] ç”¨æˆ·ä½“éªŒè‰¯å¥½
- [ ] æ€§èƒ½æŒ‡æ ‡è¾¾æ ‡

---

## ğŸ› é—®é¢˜è®°å½•

### å‘ç°çš„é—®é¢˜

| é—®é¢˜ | ä¸¥é‡æ€§ | æè¿° | çŠ¶æ€ |
|------|--------|------|------|
| 1 | â˜ é«˜ â˜ ä¸­ â˜ ä½ | | â˜ å¾…ä¿®å¤ â˜ å·²ä¿®å¤ |
| 2 | â˜ é«˜ â˜ ä¸­ â˜ ä½ | | â˜ å¾…ä¿®å¤ â˜ å·²ä¿®å¤ |
| 3 | â˜ é«˜ â˜ ä¸­ â˜ ä½ | | â˜ å¾…ä¿®å¤ â˜ å·²ä¿®å¤ |

---

## ğŸ“ æµ‹è¯•ç»“è®º

### æµ‹è¯•ç»“æœ

- [ ] âœ… æ‰€æœ‰æµ‹è¯•é€šè¿‡
- [ ] âš ï¸ éƒ¨åˆ†æµ‹è¯•é€šè¿‡ï¼ˆéœ€è¦ä¿®å¤ï¼‰
- [ ] âŒ æµ‹è¯•å¤±è´¥ï¼ˆéœ€è¦å›æ»šï¼‰

### æ€§èƒ½æå‡

| æŒ‡æ ‡ | ä¼˜åŒ–å‰ | ä¼˜åŒ–å | æå‡ |
|------|--------|--------|------|
| çª—å£åˆ‡æ¢ | ___ms | ___ms | ___% |
| å³°å€¼å†…å­˜ | ___MB | ___MB | ___% |

### å»ºè®®

- [ ] å¯ä»¥éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ
- [ ] éœ€è¦è¿›ä¸€æ­¥ä¼˜åŒ–
- [ ] éœ€è¦å›æ»š

---

**æµ‹è¯•äºº**ï¼š___________  
**æµ‹è¯•æ—¥æœŸ**ï¼š___________  
**æµ‹è¯•ç¯å¢ƒ**ï¼š___________  
**æµ‹è¯•ç»“è®º**ï¼š___________

